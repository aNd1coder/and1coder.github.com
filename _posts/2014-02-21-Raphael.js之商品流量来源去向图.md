---
layout: post
title: Raphael.js之商品流量来源去向图
---
<style>
@font-face {
    font-family: "webfont";
    src: url(/public/font/webfont.eot);
    src: url(/public/font/webfont.eot?#iefix) format("embedded-opentype"),
    url(/public/font/webfont.svg#webfontregular) format("svg"),
    url(/public/font/webfont.woff) format("woff"),
    url(/public/font/webfont.ttf) format("truetype");
    font-weight: normal;
    font-style: normal;
    -webkit-font-smoothing: antialiased;
}

.wrapper {
    position: relative;
    width: 600px;
    height: 650px;
    margin-top:100px;
}

.avatar {
    position: absolute;
    top: 300px;
    left: 326px;
    width: 90px;
    height: 90px;
    margin: -45px 0 0 -45px;
    border-radius: 50px;
}
</style>
<div class="wrapper">
    <div id="graph"></div>
    <img class="avatar" width="90" height="90" src="https://2.gravatar.com/avatar/e0c987d94d37f5d19f5b6c4fedff65e0?d=https%3A%2F%2Fidenticons.github.com%2F452d53ad8bacae3b21116c716b0871d3.png&r=x&s=440" alt=""/>
</div>
<script src="/public/js/jquery-1.8.3.min.js"></script>
<script src="/public/js/raphael.js"></script>
<script src="/public/js/graph.js"></script>
<script>
    var option = {
        elem: document.getElementById('graph'),
        data: {
            sources: [
                {
                    name: '特卖门户',
                    percent: '65%',
                    pv: '3007',
                    dests: [
                        {
                            name: "收藏商品",
                            percent: "22%",
                            pv: 3
                        },
                        {
                            name: "直接下单",
                            percent: "8%",
                            pv: 6
                        },
                        {
                            name: "加入购物车未下单",
                            percent: "10%",
                            pv: 26
                        },
                        {
                            name: "到其他店铺",
                            percent: "30%",
                            pv: 94
                        },
                        {
                            name: "到店铺其他页面",
                            percent: "15%",
                            pv: 848
                        },
                        {
                            name: "直接离开",
                            percent: "15%",
                            pv: 2026
                        }
                    ]
                },
                {
                    name: '商品详情页',
                    percent: '7%',
                    pv: '2343',
                    dests: [
                        {
                            name: "直接下单",
                            percent: "20%",
                            pv: 10
                        },
                        {
                            name: "收藏商品",
                            percent: "3%",
                            pv: 10
                        },
                        {
                            name: "加入购物车未下单",
                            percent: "4%",
                            pv: 45
                        },
                        {
                            name: "到其他店铺",
                            percent: "3%",
                            pv: 53
                        },
                        {
                            name: "到店铺其他页面",
                            percent: "32%",
                            pv: 860
                        },
                        {
                            name: "直接离开",
                            percent: "38%",
                            pv: 1361
                        }
                    ]
                },
                {
                    name: '店铺详情页',
                    percent: '17%',
                    pv: '2246',
                    dests: [
                        {
                            name: "收藏商品",
                            percent: "20%",
                            pv: 11
                        },
                        {
                            name: "直接下单",
                            percent: "20%",
                            pv: 12
                        },
                        {
                            name: "到其他店铺",
                            percent: "20%",
                            pv: 28
                        },
                        {
                            name: "加入购物车未下单",
                            percent: "20%",
                            pv: 65
                        },
                        {
                            name: '到其他店铺',
                            percent: '20%',
                            pv: '2187'
                        }
                    ]
                },
                {
                    name: '直接访问',
                    percent: '8%',
                    pv: '4587',
                    dests: [
                        {
                            name: '直接下单',
                            percent: '40%',
                            pv: '6587'
                        },
                        {
                            name: '加入购物车未下单',
                            percent: '5%',
                            pv: '47'
                        },
                        {
                            name: '收藏商品',
                            percent: '25%',
                            pv: '3187'
                        },
                        {
                            name: '直接离开',
                            percent: '10%',
                            pv: '2187'
                        },
                        {
                            name: '到店铺其他页面',
                            percent: '20%',
                            pv: '4187'
                        }
                    ]
                },
                {
                    name: '全站搜索',
                    percent: '3%',
                    pv: '1587',
                    dests: [
                        {
                            name: '直接下单',
                            percent: '30%',
                            pv: '6587'
                        },
                        {
                            name: '加入购物车未下单',
                            percent: '15%',
                            pv: '47'
                        },
                        {
                            name: '收藏商品',
                            percent: '15%',
                            pv: '3187'
                        },
                        {
                            name: '直接离开',
                            percent: '10%',
                            pv: '2187'
                        },
                        {
                            name: '到其他店铺',
                            percent: '10%',
                            pv: '2187'
                        },
                        {
                            name: '到店铺其他页面',
                            percent: '20%',
                            pv: '4187'
                        }
                    ]
                }
            ]
        }
    };

    var graph = new FlowGraph(option);
</script>